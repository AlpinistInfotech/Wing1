@model mdlCustomerIPFilter

@using B2BClasses.Services.Enums

@{
    ViewData["Title"] = enmDocumentMaster.IP_Filter.GetDocumentDetails().Name;
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="row">
    <div class="col-md-12">
        <!-- PAGE CONTENT BEGINS -->
        <form action="@Url.Action()" method="post">
            <div asp-validation-summary="All" class="text-danger"></div>
            <input type="hidden" asp-for="IPFilterId" />
            <div class="widget-box">
                <div class="widget-header">
                    <h4 class="widget-title">@ViewData["Title"]</h4>
                    <div class="widget-toolbar">
                        <a href="#" data-action="collapse">
                            <i class="ace-icon fa fa-chevron-up"></i>
                        </a>
                    </div>
                </div>

                <div class="widget-body">
                    <div class="widget-main">
                 
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label asp-for="CustomerID" class="col-sm-4 control-label"></label>
                                    <div class="col-sm-8">
                                        <select asp-for="CustomerID" class="form-control select2" asp-items="ViewBag.CustomerCodeList">
                                        </select>
                                        <span asp-validation-for="CustomerID" class="text-danger"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <button class="btn btn-info" type="submit" name="submittype" value="LoadData">Load Data</button>
                            </div>


                            <div class="col-md-6">
                                <div class="form-group">
                                    <label asp-for="allipapplicable" class="col-sm-3 control-label"></label>
                                    <div class="col-sm-9">

                                        <div class="input-group col-sm-12">
                                            <div class="row">
                                                <div class="col-sm-2">
                                                    <label class="input-group-addon input-group-addon-custom">
                                                        <input id="cboxIsAllApplicable" class="ace ace-switch" type="checkbox" asp-for="allipapplicable">
                                                        <span class="lbl" data-lbl="Yes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No"></span>
                                                    </label>
                                                </div>
                                                <div class="col-sm-10">
                                                    <input id="txtIPAddess" asp-for="IPAddess" class="form-control" />
                                                </div>
                                            </div>

                                        </div>
                                        <span asp-validation-for="allipapplicable" class="text-danger"></span>
                                    </div>
                                </div>
                            </div>

                        </div>


                        <div class="row">
                            <div class="col-md-12">
                                <div class="clearfix form-actions">
                                    <div class="col-md-offset-3 col-md-9">
                                        <button class="btn btn-info" type="submit" name="submittype" >
                                            <i class="ace-icon fa fa-check bigger-110"></i>
                                            @(Model.IPFilterId > 0? "Update":"Save")
                                        </button>
                                        &nbsp;
                                        <a href="/Home/WingMarkup" class="btn">
                                            <i class="ace-icon fa fa-undo bigger-110"></i>
                                            Reset
                                        </a>
                                        &nbsp;
                                        
                                        @if (Model.IPFilterId > 0)
                                        {
                                            <button class="btn btn-danger" type="submit" name="submittype"  value="deleteData">
                                                <i class="ace-icon fa fa-trash-o bigger-110"></i>
                                                Delete
                                            </button>
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

        </form>
    </div>
</div>

<div class="row">
    <div class="col-xs-12">
        <div class="clearfix">
            <div class="pull-right tableTools-container"></div>
        </div>
        <div class="table-header">
            Results for "All IP Filter"
        </div>

        <!-- div.table-responsive -->
        <!-- div.dataTables_borderWrap -->
        <div>
            <table id="dynamic-table" class="table table-striped table-bordered table-hover">
                <thead>
                    <tr>
                        <th>
                            Delete
                        </th>
                        <th>Customer</th>
                        <th>IP Applicable</th>
                    </tr>
                </thead>

                <tbody>
                    @foreach (var md in Model.IPFilterReport)
                    {
                        <tr>
                            <td class="center">
                                <div class="hidden-sm hidden-xs action-buttons">

                                    <a class="red" href="/Customer/CustomerIpFilter/1">
                                        <i class="ace-icon fa fa-trash-o bigger-130"></i>
                                    </a>
                                </div>

                                <div class="hidden-md hidden-lg">
                                    <div class="inline pos-rel">
                                        <button class="btn btn-minier btn-yellow dropdown-toggle" data-toggle="dropdown" data-position="auto">
                                            <i class="ace-icon fa fa-caret-down icon-only bigger-120"></i>
                                        </button>

                                        <ul class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close">
                                            <li>
                                                <a href="#" class="tooltip-info" data-rel="tooltip" title="View">
                                                    <span class="blue">
                                                        <i class="ace-icon fa fa-search-plus bigger-120"></i>
                                                    </span>
                                                </a>
                                            </li>

                                            <li>
                                                <a href="/Customer/CustomerIpFilter/1" class="tooltip-success" data-rel="tooltip" title="Edit">
                                                    <span class="green">
                                                        <i class="ace-icon fa fa-pencil-square-o bigger-120"></i>
                                                    </span>
                                                </a>
                                            </li>

                                            <li>
                                                <a href="/Customer/CustomerIpFilter/1" class="tooltip-error" data-rel="tooltip" title="Delete">
                                                    <span class="red">
                                                        <i class="ace-icon fa fa-trash-o bigger-120"></i>
                                                    </span>
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </td>
                            <td>
                                @*@md.tblCustomerMaster.CustomerName - @md.tblCustomerMaster.Code*@
                            </td>
                            <td>
                                @(md.AllowedAllIp?"All":  string.Join(", ", md.tblCustomerIPFilterDetails.Select(p=>p.IPAddress) ))
                            </td>

                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>


@section Scripts {
    @(await Html.PartialAsync("_dateTableScriptPartial",3))
    <script type="text/javascript">



        $(document).ready(function () {
            $(window).load(function () {
                if ($("#cboxIsAllApplicable").prop("checked") == true) {
                    $('#txtIPAddess').hide();
                } else {
                    $('#txtIPAddess').show();
                }
            })
            $("#cboxIsAllApplicable").change(function () {
                if (this.checked) {
                    $('#txtIPAddess').hide();
                } else {
                    $('#txtIPAddess').show();
                }
            });


        });



    </script>
}